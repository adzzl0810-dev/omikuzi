@keyframes noise-jitter {
    0% { transform: translate(0, 0); }
    10% { transform: translate(-1px, 1px); }
    20% { transform: translate(1px, -1px); }
    30% { transform: translate(-2px, 0); }
    40% { transform: translate(2px, 2px); }
    50% { transform: translate(-1px, -2px); }
    60% { transform: translate(1px, 1px); }
    70% { transform: translate(0, -1px); }
    80% { transform: translate(-1px, 0); }
    90% { transform: translate(1px, -1px); }
    100% { transform: translate(0, 0); }
}

.noise-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 10;
    opacity: var(--noise-intensity, 0);
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.7'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    transition: opacity 0.5s ease;
}

.noise-active textarea {
    animation: noise-jitter 0.2s infinite;
    text-shadow: 1px 0 2px rgba(255,0,0,0.5), -1px 0 2px rgba(0,255,255,0.5);
    filter: contrast(var(--noise-contrast, 1)) sepia(var(--noise-sepia, 0));
}

@keyframes flash-purification {
    0% { background-color: rgba(255, 255, 255, 1); box-shadow: 0 0 100px 50px rgba(255,255,255,1); }
    10% { background-color: rgba(255, 255, 255, 0.8); }
    100% { background-color: rgba(255, 255, 255, 0); box-shadow: 0 0 0 0 rgba(255,255,255,0); }
}

.flash-overlay {
    position: absolute;
    inset: -50%;
    z-index: 50;
    pointer-events: none;
    animation: flash-purification 1s ease-out forwards;
}

/* Digital Wabi-Sabi Effects for Goshuin */
.wabi-sabi-1 {
    opacity: 0.85;
    filter: blur(0.5px) contrast(0.95);
}
.wabi-sabi-2 {
    opacity: 0.75;
    filter: blur(1px) contrast(0.9) grayscale(10%);
}
.wabi-sabi-3 {
    opacity: 0.65;
    filter: blur(1.5px) contrast(0.85) grayscale(20%);
    mix-blend-mode: color-burn;
}
.wabi-sabi-4 {
    opacity: 0.5;
    filter: blur(2px) contrast(0.8) grayscale(30%) sepia(20%);
    mix-blend-mode: color-burn;
}
